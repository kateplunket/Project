<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hippo Farm Register</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

</head>
<body>
    <div id="divHome" class="col-12 row" style="background-color: #989F8B">
        <div class="container my-5"  style="background-color: #C98143">
            <div class="p-5 text-center bg-body-tertiary rounded-3">
              <h1 class="text-body-emphasis">Hippie Hippo Farm Register</h1>
              <p class="lead"> This is your one stop shop for Farm Tracking</p>
            </div>
          </div>
        <div class="col-12 col-md-6 d-flex justify-content-center align-items-center vh-100">
            <div class="card col-12 col-md-10 offset-md-1">
                <div class="card-head">
                    <h3 class="col-12 text-center mt-1">Login</h3>
                </div>
                <div class="card-body">
                    <form>
                        <input id="txtLoginFarmID" type="text" class="form-control" placeholder="FarmID" aria-label="Enter FarmID">
                        <input id="txtLoginPassword" type="password" class="form-control mt-2" placeholder="password" aria-label="Password">
                        <button class="btn col-12 mt-4 btnSwap" type="button" id="btnLogin" style="background-color: #C98143">Login</button>
                        <button class="btn col-12 mt-2 btnSwap" id="btnCreate" type="button" style="background-color: #D49C7F">Create Farm</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="d-none d-md-block col-6  d-flex justify-content-center align-items-center vh-100 bg-white">
            <div style="display:flex; justify-content: center; align-items: center;">
                <img src="farm.jpeg" alt="Farm Table" class="p-5">
            </div>
        </div>
    </div>
    <div id="divCreateUser" style="background-color: #989F8B; display:none;">
        <div class="col-12 col-md-6 d-flex justify-content-center align-items-center vh-100">
            <div class="card col-12 col-md-10 offset-md-4">
                <div class="card-head">
                    <h3 class="col-12 text-center mt-1">Create User Account</h3>
                </div>
                <div class="card-body">
                    <form>
                        <div class="form-group">
                            <label for="txtCreateFirstName" class="form-label mt-4">First Name</label>
                            <input class="form-control" id="txtCreateFirstName" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtCreateLastName" class="form-label mt-4">Last Name</label>
                            <input class="form-control" id="txtCreateLastName" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtCreateEmail" class="form-label mt-4">Email</label>
                            <input class="form-control" id="txtCreateEmail" placeholder="" type="email">
                        </div>
                        <div class="form-group">
                            <label for="txtCreatePhone" class="form-label mt-4">Phone Number</label>
                            <input class="form-control" id="txtCreatePhone" placeholder="" type="email">
                        </div>
                        <div class="form-group">
                            <label for="txtCreatePassword" class="form-label mt-4">Password</label>
                            <input class="form-control" id="txtCreatePassword" placeholder="" type="password">
                        </div>
                        <button class="btn col-12 mt-4" type="button" id="btnRegisterUser" style="background-color: #C98143">Register User</button>
                        <button class="btn col-12 mt-2 btnSwap" type="button" style="background-color: #D49C7F">Back To Login</button>
                    </form>
                </div>
            </div>
            <div class="d-none d-md-block col-6  d-flex justify-content-center align-items-center vh-100">
                <h2 class="text-center mt-5" style="background-color: #C98143">Let's Get Registered</h2>
                <div style="display:flex; justify-content: center; align-items: center;">
                    <img src="farm2.jpeg" alt="Chickens" class="p-5">
                </div>
            </div>
        </div>
    </div>
    <div id="divCreateFarm" style="background-color: #989F8B; display:none;">
        <div class="d-none d-md-block col-6  d-flex justify-content-center align-items-center">
            <h2 class="text-center mt-5">Let's Get Registered</h2>
            <div style="display:flex; justify-content: center; align-items: center;">
                <img src="farm3.jpeg" alt="Chickens at a Farm" class="p-5">
            </div>
        </div>
        <div class="col-12 col-md-6 d-flex justify-content-center align-items-center vh-100">
            <div class="card col-12 col-md-10 offset-md-1">
                <div class="card-head">
                    <h3 class="col-12 text-center mt-1">Create Farm</h3>
                </div>
                <div class="card-body">
                    <form>
                        <div class="form-group">
                            <label for="txtFarmID" class="form-label mt-4">Farm ID</label>
                            <input class="form-control" id="txtFarmID" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtFarmName" class="form-label mt-4">Farm Name</label>
                            <input class="form-control" id="txtFarmName" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtAddressLine1" class="form-label mt-4">Street Address</label>
                            <input class="form-control" id="txtAddressLine1" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtAddressLine2" class="form-label mt-4">Street Address 2</label>
                            <input class="form-control" id="txtAddressLine2" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtFarmCity" class="form-label mt-4">City</label>
                            <input class="form-control" id="txtFarmCity" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtFarmState" class="form-label mt-4">State</label>
                            <input class="form-control" id="txtFarmState" placeholder="" type="text">
                        </div>
                        <div class="form-group">
                            <label for="txtFarmZip" class="form-label mt-4">Zip</label>
                            <input class="form-control" id="txtFarmZip" placeholder="" type="text">
                        </div>
                        <button class="btn col-12 mt-4" type="button" id="btnRegisterFarm" style="background-color: #C98143">Register Farm</button>
                        <button class="btn col-12 mt-2 btnSwap" type="button" style="background-color: #D49C7F">Back To Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div id="divUser" style="background-color: #989F8B; display:none;">
        <div class="d-none d-md-block col-6  d-flex justify-content-center align-items-center vh-100">
            <h2 class="text-center mt-5">User Dashboard</h2>
            <div style="display:flex; justify-content: center; align-items: center;">
                <img src="farm4.jpeg" alt="Hippo Logo" class="p-5">
            </div>
        </div>
        <div id="tblHours">
            <table>
                <thead>
                    <td></td>
                </thead>
            </table>
        </div>
        <div id="tblSalary">
            <table>
                <thead>
                    <td></td>
                </thead>
            </table>
        </div>
        <div id="tblFarmID">
            <table>
                <thead>
                    <td></td>
                </thead>
            </table>
        </div>
        <div>
            <form>
                <input placeholder="enter hours worked">
                <button style="background-color: #C98143">Input Hours</button>
            </form>
            <form>
                <input placeholder="enter your rate per hour">
                <button style="background-color: #C98143">Input Salary</button>
            </form>
            <form>
                <input placeholder="enter the FarmID">
                <button style="background-color: #C98143">Input FarmID</button>
            </form>
        </div>
    </div>
    <div id="divFarm" style="background-color: #989F8B; display:none">
        <div id="cardProfile" class="card card-outline flex-fill card-profile">
            <div class="card-header with-border">
                <h3 class="card-title"><i class="fas mr-2"></i>Farm Profile</h3>
            </div>
        <div id="tblUsers">
            <div form-control>
                <div class="card col-md-6 col-md-4 offset-md-1">
                    <div class="card-head">
                        <h3 class="col-12 text-center mt-1">Track Your Employees</h3>
                    </div>
                    <div class="card-body">
                        <form>
                            <input id="txtUserID" type="text" class="form-control mt-2" placeholder="UserID" aria-label="enter UserID">
                            <button class="btn col-12 mt-4" type="button" id="btnCreateNewUser" style="background-color: #C98143">Add to Farm</button>    
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="tblProducts">
            <div form-control>
                <div class="card col-md-6 col-md-4 offset-md-1">
                    <div class="card-head">
                        <h3 class="col-12 text-center mt-1">Track Your Products</h3>
                    </div>
                    <div class="card-body">
                        <ul id="listProduct">
                            <li id="product1" onclick="showInfo(this)">ex. Corn</li>
                        </ul>
                        <form>
                            <input id="txtProduct" type="text" class="form-control mt-2" placeholder="ex. Corn" aria-label="enter Products">
                            <button class="btn col-12 mt-4" type="button" id="btnCreateNewProduct" style="background-color: #C98143">Add to Products</button>    
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="tblTasks">
            <div form-control>
                <div class="card col-md-6 col-md-4 offset-md-1">
                    <div class="card-head">
                        <h3 class="col-12 text-center mt-1">Track Your Tasks</h3>
                    </div>
                    <div class="card-body">
                        <ul id="listProduct">
                            <li id="product1" onclick="showInfo(this)">ex.Milk the Cow</li>
                        </ul>
                        <form>
                            <input id="txtProduct" type="text" class="form-control mt-2" placeholder="ex. Corn" aria-label="enter Products">
                            <button class="btn col-12 mt-4" type="button" id="btnCreateNewTask" style="background-color: #C98143">Add to Products</button>    
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="tblMaterials">
            <div form-control>
                <div class="card col-md-6 col-md-4 offset-md-1">
                    <div class="card-head">
                        <h3 class="col-12 text-center mt-1">Track Your Materials</h3>
                    </div>
                    <div class="card-body">
                        <ul id="listProduct">
                            <li id="product1" onclick="showInfo(this)">ex.Hay</li>
                        </ul>
                        <form>
                            <input id="txtProduct" type="text" class="form-control mt-2" placeholder="ex. Corn" aria-label="enter Products">
                            <button class="btn col-12 mt-4" type="button" id="btnCreateNewmaterials" style="background-color: #C98143">Add to Products</button>    
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="tblHarvest">
            <div form-control>
                <div class="card col-md-6 col-md-4 offset-md-1">
                    <div class="card-head">
                        <h3 class="col-12 text-center mt-1">Track Your Harvest</h3>
                    </div>
                    <div class="card-body">
                        <ul id="listProduct">
                            <li id="product1" onclick="showInfo(this)">ex.2021 Harvest</li>
                        </ul>
                        <form>
                            <input id="txtProduct" type="text" class="form-control mt-2" placeholder="ex. Corn" aria-label="enter Products">
                            <button class="btn col-12 mt-4" type="button" id="btnCreateNewHarvest" style="background-color: #C98143">Add to Products</button>    
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="farmReport">
            <div form-control>
                <div class="card col-md-6 col-md-4 offset-md-1">
                    <div class="card-head">
                        <h3 class="col-12 text-center mt-1">Generate a Report!</h3>
                    </div>
                    <div class="card-body">
                        <form>
                            set time frame and wants from Report
                            <button class="btn col-md-6 mt-4 offset-md-1" type="button" style="background-color: #C98143">Generate Report</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-none d-md-block col-6  d-flex justify-content-center align-items-center vh-100">
            <div style="display:flex; justify-content: center; align-items: center;">
                <img src="farm5.jpeg" alt="Hippo Logo" class="p-5">
            </div>
        </div>
    </div>
    </div>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
 <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
 <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
 <script>
    $('#btnLogin').on('click',function(){
        $('#divHome').slideToggle(function(){
            $('#divFarm').slideToggle()
        });
    })
    $('#btnCreate').on('click',function(){
        $('#divHome').slideToggle(function(){
            $('#divCreateFarm').slideToggle();
        });
    })
    $('#btnNewUser').on('click',function(){
        $('#divFarm').slideToggle(function(){
            $('#divCreateFarm').slideToggle()
        })
    })


    $('#btnRegisterUser').on('click',function(){
        let strFirstName = $('#txtCreateFirstName').val()
        let strLastName = $('#txtCreateLastName').val()
        let strEmail = $('#txtCreateEmail').val()
        let strPhone = $('#txtCreatePhone').val()
        let strPassword = $('#txtCreatePassword').val()

        let blnError = false
        let strErrorMessage = ''

        if(strFirstName.length < 1){
            blnError = true
            strErrorMessage += "Please Enter A First Name. "
        }
        if(strLastName.length < 1){
            blnError = true
            strErrorMessage += "Please Enter A Last Name. "
        }
        if(strEmail.length < 1){
            blnError = true
            strErrorMessage += "Please Enter An Email. "
        }
        if(strPhone.length < 1){
            blnError = true
            strErrorMessage += "Please Enter A Phone Number. "
        }
        if(strPassword.length < 1){
            blnError = true
            strErrorMessage += "Please Enter A Password. "
        }
        if(blnError == true){
            swal({
                icon: "error",
                text: strErrorMessage
            });
        }

        if(blnError == false){
            $.post('htpp://localhost:8000/users',{First:strFirstName,Last:strLastName,Email:strEmail,Phone:strPhone,Password:strPassword},function(result){
                result = JSON.parse
                if(resultError){
                    swal({
                        icon: 'error',
                        text: '<p> User Creation Error <p>'
                    })
                } else{
                    $.post('http://localhost:8000/users',{Email:strEmail,Password:strPassword},function(){
                        result = JSON.parse
                        if(resultError){
                            swal({
                                icon: 'error',
                                text: '<p> Please Return to Login, User Creation Failed <p>'
                            })
                        }
                        if(resultSucess){
                            sessionStorage.setItem('Simple Session',resultSession.SessionID)
                            $('#divUser').slideToggle()
                        }
                    })
                }
            })
        }
    })

    $('#btnRegisterFarm').on('click',function(){
        let strFarmID = $('#txtFarmID').val()
        let strFarmName = $('#txtFarmName').val()
        let strAddress1 = $('#txtAddressLine1').val()
        let strAddress2 = $('#txtAddressLine2').val()
        let strCity = $('#txtFarmCity').val()
        let strState = $('#txtFarmState').val()
        let strZip = $('#txtFarmZip').val()

        let blnError = false
        let strErrorMessage = ''

        if(strFarmID.length < 1){
            blnError = true
            strErrorMessage += "Please Enter A Farm ID."
        }
        if(strFarmName.length < 1){
            blnError = true
            strErrorMessage += " Please Enter A Farm Name."
        }
        if(strAddress1.length < 1){
            blnError = true
            strErrorMessage += " Please Enter An Address."
        }
        if(strCity.length < 1){
            blnError = true
            strErrorMessage += " Please Enter A City."
        }
        if(strState.length < 1){
            blnError = true
            strErrorMessage += " Please Enter A State."
        }
        if(strZip.length < 1){
            blnError = true
            strErrorMessage += " Please Enter A Zip."
        }
        if(blnError == true){
            swal({
                icon: 'error',
                text: strErrorMessage
            })
        }

        if(blnError == false){
            $.post('http://localhost:8000/farm',{FarmID:strFarmID,FarmName:strFarmName,StreetAddress1:strAddress1,StreetAddress2:strAddress2,
                City:strCity,State:strState,Zip:strZip},function(result){
                result = JSON.parse
                if(resultError){
                    swal({
                        icon: 'error',
                        text: '<p> User Creation Error <p>'
                    })
                } else{
                    $.post('http://localhost:8000/farm',{FarmID,strFarmID},function(){
                        result = JSON.parse
                        if(resultError){
                            swal({
                                icon: 'error',
                                text: '<p> Please Return to Login, User Creation Failed <p>'
                            })
                        }
                        if(resultSucess){
                            sessionStorage.setItem('Simple Session',resultSession.SessionID)
                            $('#divFarm').slideToggle()
                        }
                    })
                }
            })
        }
    })

    $(document).on('click', '#btnLogin', function(){
            let strFarmID = $('#txtLoginFarmID').val();
            let strPassword = $('#txtLoginFarmPassword').val();

            var objInsertResult;
            var objInsertCallBack = $.post('http://localhost:8000/farm?email=' + strFarmID + '&password=' + strPassword, function(result){
                objInsertResult = result;
            })

            $.when(objInsertCallBack).done(function(){
                $.getJSON('http://localhost:8000/farm', function(result){
                    $.each(result,function(index,farm){
                        $('#divFarm').append(farm.FarmID + ' ' + farm.Password);
                    })
                    console.log(result);
                })
            })
        })

        $(document).on('click', '#btnRegisterUser', function(){
            let strFirstName = $('#txtCreateFirstName').val()
            let strLastName = $('#txtCreateLastName').val()
            let strEmail = $('#txtCreateEmail').val()
            let strPhone = $('#txtCreatePhone').val()            

            var objInsertResult;
            var objInsertCallBack = $.post('http://localhost:8000/user?FName=' + strFirstName + '&LName=' + strLastName + '&Email='+ strEmail + '&Phone=' + strPhone, function(result){
                objInsertResult = result;
            })

            $.when(objInsertCallBack).done(function(){
                $.getJSON('http://localhost:8000/user', function(result){
                    $.each(result,function(index,user){
                        $('#divFarm').append(user.strFirstName + ' ' + user.strLastName + ' ' + user.strEmail + ' ' + user.strPhone);
                    })
                    console.log(result);
                })
            })
        })

        $(document).on('click', '#btnCreateNewProduct', function(){
            let strFarmID = $('#txtLoginFarmID').val();
            let strPassword = $('#txtLoginFarmPassword').val();

            var objInsertResult;
            var objInsertCallBack = $.post('http://localhost:8000/farm?email=' + strFarmID + '&password=' + strPassword, function(result){
                objInsertResult = result;
            })

            $.when(objInsertCallBack).done(function(){
                $.getJSON('http://localhost:8000/farm', function(result){
                    $.each(result,function(index,farm){
                        $('#divFarm').append(farm.FarmID + ' ' + farm.Password);
                    })
                    console.log(result);
                })
            })
        })

        $(document).on('click', '#btnCreateNewTask', function(){
            let strFarmID = $('#txtLoginFarmID').val();
            let strPassword = $('#txtLoginFarmPassword').val();

            var objInsertResult;
            var objInsertCallBack = $.post('http://localhost:8000/farm?email=' + strFarmID + '&password=' + strPassword, function(result){
                objInsertResult = result;
            })

            $.when(objInsertCallBack).done(function(){
                $.getJSON('http://localhost:8000/farm', function(result){
                    $.each(result,function(index,farm){
                        $('#divFarm').append(farm.FarmID + ' ' + farm.Password);
                    })
                    console.log(result);
                })
            })
        })

        $(document).on('click', '#btnCreateNewProduct', function(){
            let strFarmID = $('#txtLoginFarmID').val();
            let strPassword = $('#txtLoginFarmPassword').val();

            var objInsertResult;
            var objInsertCallBack = $.post('http://localhost:8000/farm?email=' + strFarmID + '&password=' + strPassword, function(result){
                objInsertResult = result;
            })

            $.when(objInsertCallBack).done(function(){
                $.getJSON('http://localhost:8000/farm', function(result){
                    $.each(result,function(index,farm){
                        $('#divFarm').append(farm.FarmID + ' ' + farm.Password);
                    })
                    console.log(result);
                })
            })
        })
    

    function showInfo(item) {
			// Get the corresponding info element
			var info = document.getElementById(item.id + "-info");
			if (info.classList.contains("hidden")) {
				// Show the info element
				info.classList.remove("hidden");
			} else {
				// Hide the info element
				info.classList.add("hidden");
			}
		}
 </script>

</body>
</html>